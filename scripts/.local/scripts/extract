#!/bin/bash
# Universal archive extractor (macOS + Linux)

if [ $# -eq 0 ]; then
    echo "Usage: extract <archive> [archive2] ..."
    exit 1
fi

for file in "$@"; do
    if [ ! -f "$file" ]; then
        echo "Not found: $file"
        continue
    fi

    echo "Extracting: $file"

    case "$file" in
        *.tar.bz2)  tar xjf "$file"     ;;
        *.tar.gz)   tar xzf "$file"     ;;
        *.tar.xz)   tar xJf "$file"     ;;
        *.tar.zst)  tar --zstd -xf "$file" ;;
        *.bz2)      bunzip2 "$file"     ;;
        *.gz)       gunzip "$file"      ;;
        *.tar)      tar xf "$file"      ;;
        *.tbz2)     tar xjf "$file"     ;;
        *.tgz)      tar xzf "$file"     ;;
        *.zip)      unzip "$file"       ;;
        *.Z)        uncompress "$file"  ;;
        *.7z)       7z x "$file"        ;;
        *.rar)      unrar x "$file"     ;;
        *.xz)       unxz "$file"        ;;
        *.zst)      unzstd "$file"      ;;
        *)
            echo "Unknown format: $file"
            continue
            ;;
    esac

    if [ $? -eq 0 ]; then
        echo "Done: $file"
    else
        echo "Failed: $file"
    fi
done
