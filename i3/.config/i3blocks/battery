#!/bin/bash
battery_path="/sys/class/power_supply/BAT0"
[[ -d "$battery_path" ]] || battery_path="/sys/class/power_supply/BAT1"

if [[ -d "$battery_path" ]]; then
    capacity=$(cat "$battery_path/capacity")
    status=$(cat "$battery_path/status")

    case "$status" in
        Charging) icon="⚡ CHR" ;;
        Discharging) icon="⚡ BAT" ;;
        Full) icon="⚡ FULL" ;;
        *) icon="⚡ UNK" ;;
    esac

    echo "$icon $capacity%"

    if [[ "$capacity" -lt 10 && "$status" == "Discharging" ]]; then
        echo ""
        echo "#bf616a"
    fi
else
    echo ""
fi
